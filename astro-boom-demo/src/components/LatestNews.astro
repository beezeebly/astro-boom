---
import { getCollection } from 'astro:content';

const newsEntries = await getCollection('news');
const latestNews = newsEntries
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
  .slice(0, 3);
---

<div>
  <h2 class="text-2xl font-bold mb-6">Latest News</h2>
  {latestNews.length > 0 ? (
    <div class="space-y-4">
      {latestNews.map((entry) => (
        <article class="border-l-4 border-primary pl-4">
          <h3 class="font-semibold text-lg">
            <a href={'/news/' + entry.slug} class="hover:text-primary">
              {entry.data.title}
            </a>
          </h3>
          <time class="text-sm text-gray-500">
            {entry.data.date.toLocaleDateString()}
          </time>
          <p class="text-gray-600 mt-1">{entry.data.summary}</p>
        </article>
      ))}
    </div>
  ) : (
    <p class="text-gray-600">No news articles yet.</p>
  )}
</div>